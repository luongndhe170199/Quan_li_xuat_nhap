@model Grocery_store.Models.Invoice

@{
    ViewData["Title"] = "Tạo Hóa Đơn";
}

<h2>Tạo Hóa Đơn</h2>

<form asp-action="Create" asp-controller="Invoice" method="post">
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    <div class="form-group">
        <label for="Customer">Khách hàng</label>
        <select class="form-control" asp-items="@(new SelectList(ViewBag.CustomerList, "Id", "Name"))" name="CustomerId"></select>
    </div>

    <!-- Khu vực thêm sản phẩm -->
    <h3>Sản phẩm</h3>
    <div id="product-list">
        <div class="form-group product-item">
            <label for="Product">Sản phẩm</label>
            <select class="form-control" asp-items="@(new SelectList(ViewBag.ProductList, "Id", "Name"))" name="productIds"></select>

            <label for="Quantity">Số lượng</label>
            <input type="number" class="form-control" name="quantities" min="1" value="1" />

            <label for="IsWholesale">Giá bán</label>
            <select class="form-control" name="isWholesales">
                <option value="false">Giá lẻ</option>
                <option value="true">Giá sỉ</option>
            </select>
        </div>
    </div>

    <button type="button" class="btn btn-success" onclick="addProduct()">Thêm sản phẩm</button>

    <div class="form-group">
        <label for="Discount">Chiết khấu</label>
        <input type="number" class="form-control" name="discount" step="0.01" value="0" min="0" />
    </div>

    <button type="submit" class="btn btn-primary">Tạo Hóa Đơn</button>
</form>

<!-- JavaScript để thêm sản phẩm vào danh sách -->
<script>
    function addProduct() {
        var productList = document.getElementById('product-list');
        var newProduct = document.querySelector('.product-item').cloneNode(true);

        // Reset các input của sản phẩm mới
        newProduct.querySelector('select[name="productIds"]').selectedIndex = 0;
        newProduct.querySelector('input[name="quantities"]').value = 1;
        newProduct.querySelector('select[name="isWholesales"]').selectedIndex = 0;

        productList.appendChild(newProduct);
    }
</script>
